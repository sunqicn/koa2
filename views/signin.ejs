<%- include('./header.ejs',{type:'signin'}) %>

    <div>
        <form action="" class="from">
            用户名：
            <input type="text" name="name"> 密码：
            <input type="password" name="password">
            <input type="button" value="确定" class="btn">
        </form>
    </div>

    <script>
        $('.btn').click(function () {
            $.ajax({
                url: '/signin',
                type: 'POST',
                dataType: 'json',
                data: $('.from').serialize(),
                success: function (msg) {
                    if (msg.code != 200) {
                        $('input').val('')
                        alert('用户名或密码错误')
                    } else {
                        alert('登录成功')
                        window.location.href = "/posts"
                    }
                },
                error:function(error){
                    console.log(error)
                }
            })
        })
    </script>